
{% extends 'base.html' %}
{% block title %}Usuarios - ACREDICOM{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="text-success">Usuarios</h3>
  <a href="{% url 'accounts:user_create' %}" class="btn btn-success">Nuevo usuario</a>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Usuario</th><th>Nombre</th><th>Correo</th><th>Rol</th><th>Activo</th><th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for u in usuarios %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.profile.nombres_completos }}</td>
      <td>{{ u.email }}</td>
      <td>{% if u.groups.filter(name='ADMINISTRADOR').exists %}Administrador{% else %}Usuario{% endif %}</td>
      <td>{{ u.is_active|yesno:"Sí,No" }}</td>
      <td>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'accounts:user_edit' u.id %}">Editar</a>
        {% if request.user.id != u.id %}
        <a class="btn btn-sm btn-outline-danger" href="{% url 'accounts:user_delete' u.id %}" onclick="return confirm('¿Eliminar usuario?')">Eliminar</a>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center text-muted">Sin usuarios.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
